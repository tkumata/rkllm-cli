# TODO (RKLLM Agent CLI)

## 優先度: 高

- [x] プロンプト組み立ての分離・簡素化: system/user/context/tools の 4 段を明示し、<files> は参照専用、出力は `<file path="...">` のみを許可。
- [x] ファイル入出力パイプラインの固定: 「指定されたファイルを読む → 翻訳/概要/追記などを行う → 指定された出力ファイルに保存」フローを実装。入力と同一内容の書き込み禁止、出力ターゲット不明時は保存しない。
- [x] MCP ツールの取り扱い整理: 接続成功時に短縮版ツール一覧と必須引数優先の `[TOOL_CALL]` サンプルを常時 system プロンプトに挿入し、ローカル書き込み優先を明文化。
- [x] 実機確認: LLM が入力内容を変換したうえで出力しているか（入力そのままを書かないこと）、複数出力ターゲット指示を含めて動作検証。

## 優先度: 中

- [x] 上書き確認フロー: `--confirm-writes` オプションで全書き込み前に確認可能にする。
- [x] プロンプト送信前プレビュー: `--preview-prompt` と `RKLLM_DEBUG_PROMPT` で送信内容を確認できるようにする。
- [x] Qwen/Gemma 以外のモデルテンプレの検討と docs 追記（RK3588 向け推奨設定の補足）。
- [ ] 複数行が実装されたので、アローキーでカーソル移動し挿入できるようにする。

## 優先度: 低

- [x] MCP ツールのみ使う運用ガイドの追加（tool-only モードの best practice）。
- [ ] プロンプトプレビュー出力の整形（長さのみ表示/サマリ表示のトグル整理）。
- [ ] ファイル出力フォーマットの一本化: `<file path="...">` を正とし、ブラケット形式は互換扱いに整理。実装とドキュメントを同期。
